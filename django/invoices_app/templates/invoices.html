{% extends 'master.html' %}

{% block content %}
    <!-- Invoices filtering and aggregation -->
    <form class="row g-3" method="post">
        {% csrf_token %}
        <div class="col-md-3">
            <label for="{{ form.date_from.id_for_label }}" class="form-label">{{ form.date_from.label_tag }}</label>
            <input type="date" class="form-control" id="{{ form.date_from.id_for_label }}" name="{{ form.date_from.name }}" value="{{ form.date_from.value }}">
            {% if form.date_from.errors %}
            <div class="alert alert-danger">
                <ul style="text-align: left">
                    {% for error in form.date_from.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>

        <div class="col-md-3">
            <label for="{{ form.date_to.id_for_label }}" class="form-label">{{ form.date_to.label_tag }}</label>
            <input type="date" class="form-control" id="{{ form.date_to.id_for_label }}" name="{{ form.date_to.name }}" value="{{ form.date_to.value }}">
            {% if form.date_to.errors %}
            <div class="alert alert-danger">
                <ul style="text-align: left">
                    {% for error in form.date_to.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>

        <div class="col-md-6"></div>

        <div class="col-md-6">
            <label for="{{ form.company.id_for_label }}" class="form-label">{{ form.company.label_tag }}</label>
            <select class="form-select" id="{{ form.company.id_for_label }}" name="{{ form.company.name }}">
                <option value="">...</option>
                {% for instance in form.company.field.queryset %}
                    <option value="{{ instance.pk }}">{{ instance.name }}, National ID: {{ instance.national_id }}, Tax ID: {{ instance.tax_number }}</option>
                {% endfor %}
            </select>
            {% if form.company.errors %}
            <div class="alert alert-danger">
                <ul style="text-align: left">
                    {% for error in form.company.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
        
        <div class="col-md-6"></div>
        
        <div class="col-md-6">
            <label for="{{ form.city.id_for_label }}" class="form-label">{{ form.city.label_tag }}</label>
            <select class="form-select" id="{{ form.city.id_for_label }}" name="{{ form.city.name }}">
                <option value="">...</option>
                {% for instance in form.city.field.queryset %}
                    <option value="{{ instance.pk }}">{{ instance.post_code}} {{ instance.city }}</option>
                {% endfor %}
            </select>
            {% if form.city.errors %}
            <div class="alert alert-danger">
                <ul style="text-align: left">
                    {% for error in form.city.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>

        <div class="col-md-6"></div>

        <div class="col-md-3">
            <label for="{{ form.total_from.id_for_label }}" class="form-label">{{ form.total_from.label_tag }}</label>
            <input type="number" step="0.1" class="form-control" id="{{ form.total_from.id_for_label }}" name="{{ form.total_from.name }}" value="{{ form.total_from.value }}">
            {% if form.total_from.errors %}
            <div class="alert alert-danger">
                <ul style="text-align: left">
                    {% for error in form.total_from.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
        
        <div class="col-md-3">
            <label for="{{ form.total_to.id_for_label }}" class="form-label">{{ form.total_to.label_tag }}</label>
            <input type="number" step="0.1" class="form-control" id="{{ form.total_to.id_for_label }}" name="{{ form.total_to.name }}" value="{{ form.total_to.value }}">
            {% if form.total_to.errors %}
            <div class="alert alert-danger">
                <ul style="text-align: left">
                    {% for error in form.total_to.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>

        <div class="col-md-6"></div>

        <div class="col-12">
            <button type="submit" class="btn btn-primary">Search</button>
        </div>
    </form>


{% endblock %}